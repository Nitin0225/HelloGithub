node-chrome
/apis/apps/v1/namespaces/default/deployments/node-chrome
/api/v1/namespaces/default/serviceaccounts/auto-scale-robot
API_TOKEN=eyJhbGciOiJSUzI1NiIsImtpZCI6InZFVkhqcXRDT0JvRDhNU2F3dHpoRmQ2N1BLeGlaaXpFTEdKR3NrZ29WOGsifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6ImF1dG8tc2NhbGUtcm9ib3QtdG9rZW4tcTVscHMiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiYXV0by1zY2FsZS1yb2JvdCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjdkYWU4ZTgyLTBlYWYtNGMxNS05NjhhLWQ0OWU0NDQwZjFmYiIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDpkZWZhdWx0OmF1dG8tc2NhbGUtcm9ib3QifQ.JnJ4IworMBmOxm4GfMExkugSQsL1x1sYKIpV5AgGidMylLUcpESH-Y2vsyJFTRq9pV-cXDO25QHFc5U27D75YufawrPbdSd9wPgEccEsDM-6wmxkATIPqcsLw3QRgXrZLAIUr-3bHVooAVC8o0Sl96EBtqO-3FlAd1rRffQttGz49yCqeNd4iIQphhQr6l_qWbhLPQHJr6Ea2qUhAyINJ0LxQhFgJOyUaBj-Aq7_ZttivWSoyIw8PZSEYUzx24O-Gt_sSmfNkdo53a21HlSZ6P1wUzEVcZ6sXf8yeuFvF7FssXcRli0JiQyN-4HR60ziYlL0IVUxSyLz9TisFbi75A
https://192.168.99.102:8443/api/v1/namespaces/default/pods

curl -X PATCH https://192.168.99.102:8443/apis/apps/v1/namespaces/default/deployments/node-chrome/scale \
--header "Authorization: Bearer $API_TOKEN" \
--header 'Accept: application/json' \
--header 'Content-Type: application/strategic-merge-patch+json' \
--insecure \
--data '{"spec": {"replicas":  2}}'

http://192.168.99.102:31734/echo/anymessagehere
/api/v1/namespaces/default/pods

Nitins-MacBook-Air:~ nitinkumar$ kubectl get secrets/auto-scale-robot-token-xstv7 -o yaml
apiVersion: v1
data:
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwdGFXNXAKYTNWaVpVTkJNQjRYRFRJd01EY3dOREUyTURVd01Wb1hEVE13TURjd016RTJNRFV3TVZvd0ZURVRNQkVHQTFVRQpBeE1LYldsdWFXdDFZbVZEUVRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTUZ2CnQ1THNxM3ZhbGNpbE5mSElwaDIrTmpQNzJwTjVJMWN5KytFeUVBOUtiNlZkYm80SVVJYmlSL2UwUENtWlNlcGMKU0hwdEN5YVI3RzR0V2IvWjZjbzlzS3lHMlBZVm1WcExTNS9WUmhDV3dVbHRIdmwyRDhvdUo0c1JyZDRnZ0xXRwpEZUdhTXM2a25URHNhUTB1ODhsRGY1NEhUZHU3VE1WUXFQOUtxejkzb3JTODY1d3VCYTJLRmdyTGtiWWlibHBXCi9pRFRTYjRrVTBmZmZ5c1FjSHYrcDMwSklHeUhidjg0d01xMnFDM0xaQkxaWmJhWWtCTHBUaUhwcEQ0endsQloKSWJhNWdGOXZia0JrOE1KaTlaRWovL2grZWd6cFJ2QzJFNnJNdm1mMGJ1MUFxZGdyMTkvZnRDY3hHVm43N0Q3NgpnNWJmVGp0WXNOWnQrOFQvWlNzQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUIwR0ExVWRKUVFXCk1CUUdDQ3NHQVFVRkJ3TUNCZ2dyQmdFRkJRY0RBVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFCYWVHaXIrdVJJNkJDNVdGblE5K09pbEV2OXRqRHdKNGlrTWNHYS9CeGRYNmk4Z1g5agpyVnpMRWE2cjdlTTIzcm1HK1Aza3EwQzJhTUhLQkh0VHo3NHR6ZVIyNzYvK2tLbmhZdXVpVklKUGY1MnQwTHZkCjRSZUJZQmNXUVNuNnR1S29XTHNpV004RXFFc0tqWlI4N1htV0FGUnlWNEZ5NWZtbVZzbnNpbm9HUXlxRkJmTDIKRCtGNXNrYjdTczBGWWoyakd1WFFtWnd5bG1EY1FMNFR6Vmk1QktHUnBmSllybXJ6MHJuUnFheFJTV213R0k1QQpad1VhaEZTcjR2Q0VZdWllOUZUNm42dFlRelBmbzArWURtVjFoZkJjRTQ3SUN2YkpOeE5uVVByczhiM0ZITk5SCkxVYWpza0dadzM5Zks4Mm11OGFTYUl5SHIwTGcvZnFyVXBFbwotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  namespace: ZGVmYXVsdA==
  token: ZXlKaGJHY2lPaUpTVXpJMU5pSXNJbXRwWkNJNkluWkZWa2hxY1hSRFQwSnZSRGhOVTJGM2RIcG9SbVEyTjFCTGVHbGFhWHBGVEVkS1IzTnJaMjlXT0dzaWZRLmV5SnBjM01pT2lKcmRXSmxjbTVsZEdWekwzTmxjblpwWTJWaFkyTnZkVzUwSWl3aWEzVmlaWEp1WlhSbGN5NXBieTl6WlhKMmFXTmxZV05qYjNWdWRDOXVZVzFsYzNCaFkyVWlPaUprWldaaGRXeDBJaXdpYTNWaVpYSnVaWFJsY3k1cGJ5OXpaWEoyYVdObFlXTmpiM1Z1ZEM5elpXTnlaWFF1Ym1GdFpTSTZJbUYxZEc4dGMyTmhiR1V0Y205aWIzUXRkRzlyWlc0dGVITjBkamNpTENKcmRXSmxjbTVsZEdWekxtbHZMM05sY25acFkyVmhZMk52ZFc1MEwzTmxjblpwWTJVdFlXTmpiM1Z1ZEM1dVlXMWxJam9pWVhWMGJ5MXpZMkZzWlMxeWIySnZkQ0lzSW10MVltVnlibVYwWlhNdWFXOHZjMlZ5ZG1salpXRmpZMjkxYm5RdmMyVnlkbWxqWlMxaFkyTnZkVzUwTG5WcFpDSTZJamsyTkRjek5UQXlMVFExWWpRdE5HSmhZUzA1TnpKakxUZzRNak14TkRZNFltRXhPQ0lzSW5OMVlpSTZJbk41YzNSbGJUcHpaWEoyYVdObFlXTmpiM1Z1ZERwa1pXWmhkV3gwT21GMWRHOHRjMk5oYkdVdGNtOWliM1FpZlEuZWszZDZGT25GV3Nab1h3V1piYVBqNE8xcVZoeHJXX2t4V2txaE1aZE1OMTNZVUotZ05KcFhVa2IzMVZncU0wZVlycUhQYkNhOWFxRG5uSGJNdDZxdENyS1NTSnowVGYwVWhicHhRaVBycUt4V2l2X3dxVnZmRzNPd29kZWpUVlMwTlU2Um5IN2xWU3JFY3VHbnp0SHA0R2Q5N1hrcWdqMHVLdFdRaG00ZGplWE5NejRyUzFXSlMxWDBnRUh2LU4zLWxQT2VadDY2SmllVXpwRnFUdVdvUjRkM0d5UkN6MDkyT1hNQjJ3MnNHX1kyT2xJdzl1ZG1NZDRHTXJiVFlxUXNrYnQybzVkQ3RTUWdHbUNZTWI3WFF6dWN1NnRsQ0VsWlU2WEVxbldodzNwVmxweWdEXzdRUEpZWnJua19JdzdTcmZRRkpSMFJNWGdwZGpCaDN3clFB
kind: Secret
metadata:
  annotations:
    kubernetes.io/service-account.name: auto-scale-robot
    kubernetes.io/service-account.uid: 96473502-45b4-4baa-972c-88231468ba18
  creationTimestamp: "2020-07-15T15:11:00Z"
  managedFields:
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:data:
        .: {}
        f:ca.crt: {}
        f:namespace: {}
        f:token: {}
      f:metadata:
        f:annotations:
          .: {}
          f:kubernetes.io/service-account.name: {}
          f:kubernetes.io/service-account.uid: {}
      f:type: {}
    manager: kube-controller-manager
    operation: Update
    time: "2020-07-15T15:11:00Z"
  name: auto-scale-robot-token-xstv7
  namespace: default
  resourceVersion: "154605"
  selfLink: /api/v1/namespaces/default/secrets/auto-scale-robot-token-xstv7
  uid: 8ded5df4-4a97-417e-898a-238b1083e4ba
type: kubernetes.io/service-account-token

Nitins-MacBook-Air:~ nitinkumar$ kubectl describe secret auto-scale-robot-token-xstv7
Name:         auto-scale-robot-token-xstv7
Namespace:    default
Labels:       <none>
Annotations:  kubernetes.io/service-account.name: auto-scale-robot
              kubernetes.io/service-account.uid: 96473502-45b4-4baa-972c-88231468ba18

Type:  kubernetes.io/service-account-token

Data
====
token:      eyJhbGciOiJSUzI1NiIsImtpZCI6InZFVkhqcXRDT0JvRDhNU2F3dHpoRmQ2N1BLeGlaaXpFTEdKR3NrZ29WOGsifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6ImF1dG8tc2NhbGUtcm9ib3QtdG9rZW4teHN0djciLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiYXV0by1zY2FsZS1yb2JvdCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6Ijk2NDczNTAyLTQ1YjQtNGJhYS05NzJjLTg4MjMxNDY4YmExOCIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDpkZWZhdWx0OmF1dG8tc2NhbGUtcm9ib3QifQ.ek3d6FOnFWsZoXwWZbaPj4O1qVhxrW_kxWkqhMZdMN13YUJ-gNJpXUkb31VgqM0eYrqHPbCa9aqDnnHbMt6qtCrKSSJz0Tf0UhbpxQiPrqKxWiv_wqVvfG3OwodejTVS0NU6RnH7lVSrEcuGnztHp4Gd97Xkqgj0uKtWQhm4djeXNMz4rS1WJS1X0gEHv-N3-lPOeZt66JieUzpFqTuWoR4d3GyRCz092OXMB2w2sG_Y2OlIw9udmMd4GMrbTYqQskbt2o5dCtSQgGmCYMb7XQzucu6tlCElZU6XEqnWhw3pVlpygD_7QPJYZrnk_Iw7SrfQFJR0RMXgpdjBh3wrQA
ca.crt:     1066 bytes
namespace:  7 bytes

curl -X PATCH https://192.168.99.102:8443/apis/apps/v1/namespaces/default/deployments/node-chrome \
--header "Authorization: Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6InZFVkhqcXRDT0JvRDhNU2F3dHpoRmQ2N1BLeGlaaXpFTEdKR3NrZ29WOGsifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6ImF1dG8tc2NhbGUtcm9ib3QtdG9rZW4teHN0djciLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiYXV0by1zY2FsZS1yb2JvdCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6Ijk2NDczNTAyLTQ1YjQtNGJhYS05NzJjLTg4MjMxNDY4YmExOCIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDpkZWZhdWx0OmF1dG8tc2NhbGUtcm9ib3QifQ.ek3d6FOnFWsZoXwWZbaPj4O1qVhxrW_kxWkqhMZdMN13YUJ-gNJpXUkb31VgqM0eYrqHPbCa9aqDnnHbMt6qtCrKSSJz0Tf0UhbpxQiPrqKxWiv_wqVvfG3OwodejTVS0NU6RnH7lVSrEcuGnztHp4Gd97Xkqgj0uKtWQhm4djeXNMz4rS1WJS1X0gEHv-N3-lPOeZt66JieUzpFqTuWoR4d3GyRCz092OXMB2w2sG_Y2OlIw9udmMd4GMrbTYqQskbt2o5dCtSQgGmCYMb7XQzucu6tlCElZU6XEqnWhw3pVlpygD_7QPJYZrnk_Iw7SrfQFJR0RMXgpdjBh3wrQA" \
--header 'Accept: application/json' \
--header 'Content-Type: application/strategic-merge-patch+json' \
--insecure \
--data '{"spec": {"replicas":  2}}'

Nitins-MacBook-Air:~ nitinkumar$ curl -X PATCH https://192.168.99.102:8443/apis/apps/v1/namespaces/default/deployments/node-chrome \
> --header "Authorization: Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6InZFVkhqcXRDT0JvRDhNU2F3dHpoRmQ2N1BLeGlaaXpFTEdKR3NrZ29WOGsifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6ImF1dG8tc2NhbGUtcm9ib3QtdG9rZW4teHN0djciLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiYXV0by1zY2FsZS1yb2JvdCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6Ijk2NDczNTAyLTQ1YjQtNGJhYS05NzJjLTg4MjMxNDY4YmExOCIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDpkZWZhdWx0OmF1dG8tc2NhbGUtcm9ib3QifQ.ek3d6FOnFWsZoXwWZbaPj4O1qVhxrW_kxWkqhMZdMN13YUJ-gNJpXUkb31VgqM0eYrqHPbCa9aqDnnHbMt6qtCrKSSJz0Tf0UhbpxQiPrqKxWiv_wqVvfG3OwodejTVS0NU6RnH7lVSrEcuGnztHp4Gd97Xkqgj0uKtWQhm4djeXNMz4rS1WJS1X0gEHv-N3-lPOeZt66JieUzpFqTuWoR4d3GyRCz092OXMB2w2sG_Y2OlIw9udmMd4GMrbTYqQskbt2o5dCtSQgGmCYMb7XQzucu6tlCElZU6XEqnWhw3pVlpygD_7QPJYZrnk_Iw7SrfQFJR0RMXgpdjBh3wrQA" \
> --header 'Accept: application/json' \
> --header 'Content-Type: application/strategic-merge-patch+json' \
> --insecure \
> --data '{"spec": {"replicas":  2}}'
{
  "kind": "Deployment",
  "apiVersion": "apps/v1",
  "metadata": {
    "name": "node-chrome",
    "namespace": "default",
    "selfLink": "/apis/apps/v1/namespaces/default/deployments/node-chrome",
    "uid": "2607e585-4b0e-4574-9770-588dac36fdb6",
    "resourceVersion": "167302",
    "generation": 2,
    "creationTimestamp": "2020-07-16T07:50:18Z",
    "labels": {
      "io.kompose.service": "node-chrome"
    },
    "annotations": {
      "deployment.kubernetes.io/revision": "1",
      "kompose.cmd": "kompose convert -f docker-kompose-sample.yml",
      "kompose.version": "1.21.0 ()"
    },
    "managedFields": [
      {
        "manager": "kubectl",
        "operation": "Update",
        "apiVersion": "apps/v1",
        "time": "2020-07-16T07:50:18Z",
        "fieldsType": "FieldsV1",
        "fieldsV1": {"f:metadata":{"f:annotations":{".":{},"f:kompose.cmd":{},"f:kompose.version":{}},"f:labels":{".":{},"f:io.kompose.service":{}}},"f:spec":{"f:progressDeadlineSeconds":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:io.kompose.service":{}}},"f:strategy":{"f:rollingUpdate":{".":{},"f:maxSurge":{},"f:maxUnavailable":{}},"f:type":{}},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:kompose.cmd":{},"f:kompose.version":{}},"f:labels":{".":{},"f:io.kompose.service":{}}},"f:spec":{"f:containers":{"k:{\"name\":\"node-chrome\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"HUB_HOST\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":5900,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}}},"f:resources":{},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{}}}}}
      },
      {
        "manager": "kube-controller-manager",
        "operation": "Update",
        "apiVersion": "apps/v1",
        "time": "2020-07-16T07:50:20Z",
        "fieldsType": "FieldsV1",
        "fieldsV1": {"f:metadata":{"f:annotations":{"f:deployment.kubernetes.io/revision":{}}},"f:status":{"f:availableReplicas":{},"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Progressing\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updatedReplicas":{}}}
      },
      {
        "manager": "curl",
        "operation": "Update",
        "apiVersion": "apps/v1",
        "time": "2020-07-16T08:24:56Z",
        "fieldsType": "FieldsV1",
        "fieldsV1": {"f:spec":{"f:replicas":{}}}
      }
    ]
  },
  "spec": {
    "replicas": 2,
    "selector": {
      "matchLabels": {
        "io.kompose.service": "node-chrome"
      }
    },
    "template": {
      "metadata": {
        "creationTimestamp": null,
        "labels": {
          "io.kompose.service": "node-chrome"
        },
        "annotations": {
          "kompose.cmd": "kompose convert -f docker-kompose-sample.yml",
          "kompose.version": "1.21.0 ()"
        }
      },
      "spec": {
        "containers": [
          {
            "name": "node-chrome",
            "image": "selenium/node-chrome-debug",
            "ports": [
              {
                "containerPort": 5900,
                "protocol": "TCP"
              }
            ],
            "env": [
              {
                "name": "HUB_HOST",
                "value": "selenium-hub"
              }
            ],
            "resources": {
              
            },
            "terminationMessagePath": "/dev/termination-log",
            "terminationMessagePolicy": "File",
            "imagePullPolicy": "IfNotPresent"
          }
        ],
        "restartPolicy": "Always",
        "terminationGracePeriodSeconds": 30,
        "dnsPolicy": "ClusterFirst",
        "securityContext": {
          
        },
        "schedulerName": "default-scheduler"
      }
    },
    "strategy": {
      "type": "RollingUpdate",
      "rollingUpdate": {
        "maxUnavailable": "25%",
        "maxSurge": "25%"
      }
    },
    "revisionHistoryLimit": 10,
    "progressDeadlineSeconds": 600
  },
  "status": {
    "observedGeneration": 1,
    "replicas": 1,
    "updatedReplicas": 1,
    "readyReplicas": 1,
    "availableReplicas": 1,
    "conditions": [
      {
        "type": "Available",
        "status": "True",
        "lastUpdateTime": "2020-07-16T07:50:20Z",
        "lastTransitionTime": "2020-07-16T07:50:20Z",
        "reason": "MinimumReplicasAvailable",
        "message": "Deployment has minimum availability."
      },
      {
        "type": "Progressing",
        "status": "True",
        "lastUpdateTime": "2020-07-16T07:50:20Z",
        "lastTransitionTime": "2020-07-16T07:50:18Z",
        "reason": "NewReplicaSetAvailable",
        "message": "ReplicaSet \"node-chrome-7698699c84\" has successfully progressed."
      }
    ]
  }
